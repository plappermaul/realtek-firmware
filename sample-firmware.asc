/*
 * This is a firmware source file for the Realtek RTL838X, RTL839X, RTL930X and 
 * RTL931X switch SoCs. It must be converted with gen-rtk-otto-firmware.py to 
 * a binary firmware file that can be loaded by the phy-rtk-otto-serdes driver.
 * The defines must align with the driver header.
 */

#define EVT_SETUP			1
#define EVT_INIT			2
#define EVT_POWER_ON			3
#define PRE_SET_MODE			4
#define EVT_POST_SET_MODE		5
#define EVT_PRE_RESET			6
#define EVT_POST_RESET			7
#define EVT_PRE_POWER_OFF		8
#define EVT_POST_POWER_OFF		9

#define OP_MASK				1 /* write <value> with <mask> to register */
#define OP_WAIT				2 /* delay for <value> milliseconds */

#define MODE_ALL			1
#define MODE_SGMII			2
#define MODE_HSGMII			3
#define MODE_QSGMII			4
#define MODE_QUSGMII			5
#define MODE_XGMII			6
#define MODE_USXGMII			7
#define MODE_1000BASEX			8
#define MODE_100BASEX			9
#define MODE_10GBASER			10
#define MODE_2500BASEX			11

EVT_SETUP = {
	/* 
	 * EVT_SETUP is triggered during driver probing. All SerDes are shut off
	 * and afterwards the setup sequence is run for each SerDes. With no active
	 * operation mode only MODE_ALL commands will be processed.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_ALL,		0x003f,	0x0003, 0x04, 0xa000, 0xf000, 0 },
	{ OP_WAIT, MODE_ALL,		0x003f, 0x0000, 0x00, 0x0001, 0x0000, 0 },
	{ OP_MASK, MODE_ALL,		0x003f,	0x0003, 0x12, 0x00c0, 0x00f0, 0 },
	{ OP_MASK, MODE_ALL,		0x003f,	0x0003, 0x14, 0x5678, 0xffff, 0 },	
	{ OP_WAIT, MODE_ALL,		0x003f, 0x0000, 0x00, 0x0000, 0x0000, 0 },
	{ OP_MASK, MODE_ALL,		0x003f,	0x0003, 0x14, 0x5678, 0xffff, 0 },	
};

EVT_INIT = {
        /*
         * EVT_INIT is triggered when a SerDes is initialized individually by the
	 * init() operation. At that event the driver does not interfere with the 
	 * SerDes and only runs the sequence. Usually no mode is set at that time
	 * and only MODE_ALL commands will be processed.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_ALL,		0x0030,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_ALL,		0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },
};

EVT_POWER_ON = {
        /* 
         * EVT_POWER_ON is triggerd when a SerDes is powered on individually by the
	 * power_on() operation. Realtek SerDes have no dedicated power on features
	 * but are controlled through mode setting. This event will only run the
	 * sequence and do nothing else.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_1000BASEX,	0x0030,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_1000BASEX,	0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },
};

EVT_PRE_SET_MODE ={
        /*
         * EVT_PRE_SET_MODE is triggered BEFORE the operation mode of a SerDes 
	 * changed by the set_mode() operation. At this moment the SerDes still
	 * has the old mode active. So the sequence will run all actions depending
	 * on the OLD operation mode of the SerDes.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_QSGMII,		0x0070,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_QSGMII,		0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },
};

EVT_POST_SET_MODE = {
        /*
         * EVT_PRE_SET_MODE is triggered AFTER the operation mode of a SerDes
	 * changed by the set_mode() operation. At this moment the SerDes already
	 * has the new mode active. So the sequence will run all actions depending
	 * on the NEW operation mode of the SerDes.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_XGMII,		0x0030,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_XGMII,		0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },
};

EVT_PRE_RESET = {
        /*
         * EVT_PRE_RESET is triggered BEFORE a SerDes is resetted by the reset()
	 * operation. The operation mode will not change afterwards.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_1000BASEX,	0x0030,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_1000BASEX,	0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },	
};

EVT_POST_RESET = {
        /*
         * EVT_POST_RESET is triggered AFTER a SerDes is resetted by the reset()
	 * operation. The operation has not changed before.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_1000BASEX,	0x0030,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_1000BASEX,	0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },
};

EVT_PRE_POWER_OFF = {
        /*
         * EVT_PRE_POWER_OFF is triggered BEFORE a SerDes is shut down by
	 * power_off() operation. After this sequence has run the mode of the
	 * SerDes will be set to an inactive mode.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_1000BASEX,	0x0030,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_1000BASEX,	0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },
};

EVT_POST_POWER_OFF = {
        /*
         * EVT_POST_POWER_OFF is triggered AFTER a SerDes is shut down by
	 * power_off() operation. At this moment the only mode that is taken into
	 * account in the sequence is MODE_ALL.
	 *
	 * ------------------------------------------------------------------------
	 * action, mode,		prtmsk, page,   reg,  value,  mask,   dummy
	 * ------------------------------------------------------------------------
	 */
	{ OP_MASK, MODE_1000BASEX,	0x0030,	0x0008, 0x11, 0x0000, 0x8000, 0 },
	{ OP_WAIT, MODE_1000BASEX,	0x0000, 0x0000, 0x00, 0x0001, 0x0000, 0 },
};
